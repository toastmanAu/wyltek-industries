<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CKB Node Sync â€” Wyltek Industries</title>
  <meta name="description" content="Fast-sync your Nervos CKB full node with a verified, GPG-signed snapshot. Download or use assume_valid_target for trustless fast sync." />
  <link rel="canonical" href="https://wyltekindustries.com/ckb-sync" />
  <style>
    :root {
      --bg:       #0a0c0f;
      --surface:  #111318;
      --surface2: #181c23;
      --border:   #1e2430;
      --accent:   #00c8ff;
      --accent2:  #7b5cfa;
      --green:    #00e5a0;
      --orange:   #ff8c42;
      --red:      #ff4f4f;
      --text:     #e2e8f0;
      --muted:    #64748b;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', system-ui, sans-serif;
      min-height: 100vh;
    }

    /* â”€â”€ Nav â”€â”€ */
    nav {
      display: flex; align-items: center; justify-content: space-between;
      padding: 1rem 2rem; border-bottom: 1px solid var(--border);
      position: sticky; top: 0; background: var(--bg); z-index: 100;
    }
    .nav-logo { font-weight: 700; font-size: 1.1rem; color: var(--accent); text-decoration: none; }
    .nav-links { display: flex; gap: 1.5rem; }
    .nav-links a { color: var(--muted); text-decoration: none; font-size: 0.9rem; transition: color .2s; }
    .nav-links a:hover { color: var(--text); }

    /* â”€â”€ Hero â”€â”€ */
    .hero {
      text-align: center;
      padding: 4rem 2rem 2rem;
      max-width: 800px;
      margin: 0 auto;
    }
    .hero-badge {
      display: inline-block;
      background: rgba(0,200,255,.1);
      border: 1px solid rgba(0,200,255,.3);
      color: var(--accent);
      padding: .3rem .9rem;
      border-radius: 999px;
      font-size: .8rem;
      font-weight: 600;
      letter-spacing: .05em;
      text-transform: uppercase;
      margin-bottom: 1.2rem;
    }
    h1 { font-size: clamp(1.8rem, 5vw, 2.8rem); font-weight: 800; line-height: 1.15; margin-bottom: 1rem; }
    h1 span { color: var(--accent); }
    .hero p { color: var(--muted); font-size: 1.05rem; line-height: 1.7; max-width: 600px; margin: 0 auto 2rem; }

    /* â”€â”€ Snapshot card â”€â”€ */
    .snapshot-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      max-width: 680px;
      margin: 0 auto 3rem;
      overflow: hidden;
    }
    .snapshot-header {
      background: var(--surface2);
      border-bottom: 1px solid var(--border);
      padding: 1.2rem 1.5rem;
      display: flex; align-items: center; gap: .8rem;
    }
    .status-dot {
      width: 10px; height: 10px; border-radius: 50%;
      background: var(--green);
      box-shadow: 0 0 8px var(--green);
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%,100% { opacity: 1; }
      50%      { opacity: .4; }
    }
    .snapshot-header h2 { font-size: 1rem; font-weight: 600; }
    .snapshot-header .updated { margin-left: auto; color: var(--muted); font-size: .8rem; }

    .snapshot-body { padding: 1.5rem; }
    .stat-grid {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 1rem; margin-bottom: 1.5rem;
    }
    .stat {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1rem;
      text-align: center;
    }
    .stat-value { font-size: 1.4rem; font-weight: 700; color: var(--accent); }
    .stat-label { font-size: .75rem; color: var(--muted); margin-top: .25rem; }

    .badges { display: flex; gap: .5rem; flex-wrap: wrap; margin-bottom: 1.5rem; }
    .badge {
      display: flex; align-items: center; gap: .3rem;
      background: rgba(0,229,160,.08);
      border: 1px solid rgba(0,229,160,.25);
      color: var(--green);
      padding: .25rem .7rem;
      border-radius: 6px;
      font-size: .78rem;
      font-weight: 500;
    }
    .badge svg { width: 12px; height: 12px; }

    /* â”€â”€ Download button â”€â”€ */
    .dl-btn {
      display: flex; align-items: center; justify-content: center; gap: .6rem;
      width: 100%;
      padding: 1rem 1.5rem;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #fff;
      font-size: 1rem; font-weight: 700;
      border: none; border-radius: 10px;
      cursor: pointer;
      text-decoration: none;
      transition: opacity .2s, transform .1s;
      margin-bottom: .75rem;
    }
    .dl-btn:hover { opacity: .9; transform: translateY(-1px); }
    .dl-btn:active { transform: translateY(0); }
    .dl-btn.loading { opacity: .7; cursor: default; pointer-events: none; }

    .dl-sub {
      display: flex; gap: .5rem; margin-bottom: 1.5rem;
    }
    .dl-sub a {
      flex: 1; text-align: center;
      padding: .6rem;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--muted);
      font-size: .8rem;
      text-decoration: none;
      transition: color .2s, border-color .2s;
    }
    .dl-sub a:hover { color: var(--text); border-color: var(--accent); }

    .filename-box {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: .75rem 1rem;
      font-family: monospace;
      font-size: .8rem;
      color: var(--muted);
      word-break: break-all;
      margin-bottom: 1rem;
    }
    .filename-box span { color: var(--accent); }

    /* â”€â”€ Progress â”€â”€ */
    .progress-wrap { display: none; margin-bottom: 1rem; }
    .progress-wrap.show { display: block; }
    .progress-bar-bg {
      background: var(--surface2);
      border-radius: 999px;
      height: 8px;
      overflow: hidden;
      margin-bottom: .5rem;
    }
    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      border-radius: 999px;
      width: 0%;
      transition: width .3s;
    }
    .progress-info { display: flex; justify-content: space-between; font-size: .78rem; color: var(--muted); }

    /* â”€â”€ Tabs / instructions â”€â”€ */
    .tabs { display: flex; gap: 0; margin-bottom: 1.5rem; border-bottom: 1px solid var(--border); }
    .tab {
      padding: .6rem 1.2rem;
      font-size: .85rem;
      color: var(--muted);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
      transition: color .2s;
      user-select: none;
    }
    .tab.active { color: var(--accent); border-bottom-color: var(--accent); }
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    pre {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      font-size: .82rem;
      overflow-x: auto;
      line-height: 1.6;
      color: #a0b0c0;
    }
    pre .cm { color: var(--muted); }
    pre .kw { color: var(--accent); }
    pre .st { color: var(--green); }

    /* â”€â”€ Info sections â”€â”€ */
    .section { max-width: 680px; margin: 0 auto 2.5rem; }
    .section h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: 1rem; }

    .method-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .method-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.2rem;
    }
    .method-card h4 { font-size: .95rem; margin-bottom: .5rem; }
    .method-card p { font-size: .82rem; color: var(--muted); line-height: 1.6; }
    .method-card .tag {
      display: inline-block;
      padding: .15rem .5rem;
      border-radius: 4px;
      font-size: .7rem;
      font-weight: 600;
      margin-bottom: .5rem;
    }
    .tag-fast { background: rgba(0,229,160,.1); color: var(--green); }
    .tag-trust { background: rgba(0,200,255,.1); color: var(--accent); }

    .security-box {
      background: rgba(0,229,160,.05);
      border: 1px solid rgba(0,229,160,.2);
      border-radius: 10px;
      padding: 1.2rem;
      font-size: .85rem;
      line-height: 1.7;
      color: var(--muted);
    }
    .security-box strong { color: var(--text); }

    /* â”€â”€ Error state â”€â”€ */
    .error-msg {
      display: none;
      background: rgba(255,79,79,.08);
      border: 1px solid rgba(255,79,79,.3);
      border-radius: 8px;
      padding: .75rem 1rem;
      font-size: .85rem;
      color: var(--red);
      margin-bottom: 1rem;
    }
    .error-msg.show { display: block; }

    footer {
      text-align: center;
      padding: 2rem;
      color: var(--muted);
      font-size: .8rem;
      border-top: 1px solid var(--border);
      margin-top: 3rem;
    }
    footer a { color: var(--muted); text-decoration: none; }
    footer a:hover { color: var(--accent); }

    @media (max-width: 600px) {
      .stat-grid { grid-template-columns: repeat(2, 1fr); }
      .method-grid { grid-template-columns: 1fr; }
      .dl-sub { flex-direction: column; }
    }
  </style>
</head>
<body>

<nav>
  <a class="nav-logo" href="/">Wyltek Industries</a>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/blog.html">Blog</a>
    <a href="https://github.com/toastmanAu" target="_blank">GitHub</a>
  </div>
</nav>

<div class="hero">
  <div class="hero-badge">âš¡ Fast Node Sync</div>
  <h1>CKB Full Node <span>Sync Tool</span></h1>
  <p>Skip days of syncing. Download a verified, GPG-signed Nervos CKB chain snapshot and be up in hours â€” or use <code style="color:var(--accent);background:rgba(0,200,255,.1);padding:.1em .4em;border-radius:4px">assume_valid_target</code> for a trustless fast sync without downloading any snapshot.</p>
</div>

<!-- Snapshot card -->
<div class="snapshot-card" style="padding: 0 1rem; max-width: 680px; margin: 0 auto 3rem;">
  <div class="snapshot-header">
    <div class="status-dot" id="statusDot"></div>
    <h2 id="snapshotTitle">Loading latest snapshot...</h2>
    <span class="updated" id="snapshotDate"></span>
  </div>

  <div class="snapshot-body">
    <div class="stat-grid">
      <div class="stat">
        <div class="stat-value" id="blockHeight">â€”</div>
        <div class="stat-label">Block Height</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="snapSize">~47 GB</div>
        <div class="stat-label">Compressed Size</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="snapAge">â€”</div>
        <div class="stat-label">Snapshot Age</div>
      </div>
    </div>

    <div class="badges">
      <div class="badge">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 1l7 4v5c0 3.31-2.69 6-7 7C3 16 0 13.31 0 10V5l8-4z"/></svg>
        SHA256 Verified
      </div>
      <div class="badge">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm3.5 11.5l-4-2.5V4h1.5v4.25l3.25 2-0.75 1.25z"/></svg>
        GPG Signed
      </div>
      <div class="badge">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412l-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/></svg>
        Free Egress via Cloudflare
      </div>
      <div class="badge">
        <svg viewBox="0 0 16 16" fill="currentColor"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5zM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11z"/></svg>
        Resumable Download
      </div>
    </div>

    <div class="error-msg" id="errorMsg">âš  Could not load snapshot info. Check back shortly or download manually below.</div>

    <div class="filename-box" id="filenameBox">
      <span>fetching latest snapshot info...</span>
    </div>

    <a class="dl-btn" id="dlBtn" href="#" onclick="return false;">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      Download Snapshot
    </a>

    <div class="dl-sub">
      <a href="#" id="sha256Link">SHA256 Checksum</a>
      <a href="#" id="sigLink">GPG Signature</a>
      <a href="#" id="metaLink">Metadata JSON</a>
      <a href="https://github.com/toastmanAu/ckb-snapshot" target="_blank">Source</a>
    </div>

    <!-- Instructions tabs -->
    <div class="tabs">
      <div class="tab active" onclick="switchTab('install')">Install</div>
      <div class="tab" onclick="switchTab('verify')">Verify</div>
      <div class="tab" onclick="switchTab('assume')">Trustless Sync</div>
    </div>

    <div class="tab-content active" id="tab-install">
<pre><span class="cm"># 1. Stop your CKB node</span>
<span class="kw">systemctl</span> stop ckb

<span class="cm"># 2. Download snapshot (resumable with wget -c)</span>
<span class="kw">wget</span> -c <span class="st" id="preSnapshotUrl">https://snapshots.wyltekindustries.com/latest</span>

<span class="cm"># 3. Verify checksum</span>
<span class="kw">sha256sum</span> -c <span id="preShaFile">snapshot.tar.zst</span>.sha256

<span class="cm"># 4. Extract into CKB data dir</span>
<span class="kw">tar</span> --use-compress-program=zstd -xf <span id="preTarFile">snapshot.tar.zst</span> -C ~/.ckb/data/

<span class="cm"># 5. Start node</span>
<span class="kw">systemctl</span> start ckb</pre>
    </div>

    <div class="tab-content" id="tab-verify">
<pre><span class="cm"># Import signing key (one time)</span>
<span class="kw">gpg</span> --keyserver keys.openpgp.org --recv-keys CFF9573B87BB90B7

<span class="cm"># Verify GPG signature</span>
<span class="kw">gpg</span> --verify <span id="preSigFile2">snapshot.tar.zst</span>.sha256.sig \
             <span id="preShaFile2">snapshot.tar.zst</span>.sha256

<span class="cm"># Verify checksum</span>
<span class="kw">sha256sum</span> -c <span id="preShaFile3">snapshot.tar.zst</span>.sha256

<span class="cm"># Expected: Key fingerprint</span>
<span class="cm"># F2B5 7AC3 35D8 2A28 31E1 04BA CFF9 573B 87BB 90B7</span>
<span class="cm"># uid: toastmanAu CKB Snapshots &lt;toastmanau@wyltekindustries.com&gt;</span></pre>
    </div>

    <div class="tab-content" id="tab-assume">
<pre><span class="cm"># Trustless fast sync â€” no snapshot download needed.
# Add to ckb.toml â€” skips script re-execution for old blocks.
# PoW is still fully verified. Same security model as Bitcoin assumevalid.</span>

[sync]
assume_valid_target = <span class="st" id="preAssumeHash">"0x&lt;recent-block-hash&gt;"</span>

<span class="cm"># Get a recent block hash:</span>
<span class="kw">curl</span> -s https://snapshots.wyltekindustries.com/latest.json \
  | python3 -c "import sys,json; print('Block:', json.load(sys.stdin)['block_height'])"

<span class="cm"># Or look one up at: https://explorer.nervos.org</span></pre>
    </div>

  </div>
</div>

<!-- Methods comparison -->
<div class="section">
  <h3>Which method is right for you?</h3>
  <div class="method-grid">
    <div class="method-card">
      <div class="tag tag-fast">âš¡ Fastest</div>
      <h4>Snapshot Download</h4>
      <p>Download this pre-synced chain DB. Up in 2-3 hours depending on your connection. Verify with SHA256 + GPG before use.</p>
    </div>
    <div class="method-card">
      <div class="tag tag-trust">ðŸ”’ Most Trustless</div>
      <h4>assume_valid_target</h4>
      <p>No download needed. Add one line to ckb.toml, sync from peers in hours. PoW fully verified â€” only skips old script re-execution.</p>
    </div>
    <div class="method-card">
      <div class="tag tag-trust">ðŸŒ± Full Verify</div>
      <h4>Sync from Genesis</h4>
      <p>Maximum trust. Your node verifies every block and script from block 0. Takes 3-7 days on an SBC. Best for archive nodes.</p>
    </div>
    <div class="method-card">
      <div class="tag tag-fast">ðŸ¤– Automated</div>
      <h4>Golden Image</h4>
      <p>Flash a pre-built Armbian image with CKB + snapshot pre-loaded. Plug in and go. Coming soon for Orange Pi 3B.</p>
    </div>
  </div>
</div>

<!-- Security -->
<div class="section">
  <h3>Security model</h3>
  <div class="security-box">
    <strong>Every snapshot is signed.</strong> The SHA256 checksum is GPG-signed by key <code style="color:var(--accent)">CFF9573B87BB90B7</code> (toastmanAu CKB Snapshots). Verify the fingerprint out-of-band via <a href="https://github.com/toastmanAu" style="color:var(--accent)">GitHub</a> or Nervos Nation Telegram.<br><br>
    <strong>You don't have to trust us.</strong> Use <code style="color:var(--accent)">assume_valid_target</code> instead â€” it achieves similar sync speed with zero dependency on this service. All PoW is verified by your own node either way.<br><br>
    <strong>Resume support.</strong> Downloads support HTTP Range requests. If your connection drops, use <code style="color:var(--accent)">wget -c</code> or <code style="color:var(--accent)">curl -C -</code> to resume exactly where you left off.
  </div>
</div>

<footer>
  <p>Wyltek Industries â€” <a href="/">wyltekindustries.com</a> Â· <a href="https://github.com/toastmanAu/ckb-snapshot" target="_blank">ckb-snapshot on GitHub</a> Â· Snapshots hosted on <a href="https://developers.cloudflare.com/r2/" target="_blank">Cloudflare R2</a></p>
  <p style="margin-top:.5rem">Nervos CKB is a public blockchain. This is a community service, not an official Nervos Foundation product.</p>
</footer>

<script>
const R2_BASE = 'https://snapshots.wyltekindustries.com';
const LATEST_URL = R2_BASE + '/latest.json';

async function loadSnapshot() {
  try {
    const res = await fetch(LATEST_URL, { cache: 'no-cache' });
    if (!res.ok) throw new Error('HTTP ' + res.status);
    const data = await res.json();

    // Stats
    document.getElementById('blockHeight').textContent =
      Number(data.block_height).toLocaleString();
    document.getElementById('snapshotTitle').textContent = 'Latest Snapshot Ready';
    document.getElementById('snapshotDate').textContent = 'Updated ' + data.date;

    // Age
    const days = Math.floor((Date.now() - new Date(
      data.date.replace(/(\d{4})(\d{2})(\d{2})/, '$1-$2-$3')
    )) / 86400000);
    document.getElementById('snapAge').textContent = days === 0 ? 'Today' : days + 'd ago';

    // Filename
    document.getElementById('filenameBox').innerHTML =
      '<span style="color:var(--muted)">Latest: </span><span>' + data.latest + '</span>';

    // Download button
    const btn = document.getElementById('dlBtn');
    btn.href = data.snapshot_url;
    btn.onclick = null;
    btn.innerHTML = `
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="7 10 12 15 17 10"/>
        <line x1="12" y1="15" x2="12" y2="3"/>
      </svg>
      Download Snapshot (~47 GB)`;

    // Sub links
    document.getElementById('sha256Link').href = data.sha256_url;
    document.getElementById('sigLink').href    = data.sig_url;
    document.getElementById('metaLink').href   = data.meta_url;

    // Code snippets
    const fn = data.latest;
    ['preSnapshotUrl'].forEach(id =>
      document.getElementById(id).textContent = data.snapshot_url);
    ['preShaFile','preShaFile2','preShaFile3'].forEach(id =>
      document.getElementById(id).textContent = fn);
    ['preSigFile2'].forEach(id =>
      document.getElementById(id).textContent = fn);
    ['preTarFile'].forEach(id =>
      document.getElementById(id).textContent = fn);

  } catch (e) {
    document.getElementById('statusDot').style.background = 'var(--red)';
    document.getElementById('statusDot').style.boxShadow = '0 0 8px var(--red)';
    document.getElementById('snapshotTitle').textContent = 'Snapshot service unavailable';
    document.getElementById('errorMsg').classList.add('show');
    document.getElementById('filenameBox').innerHTML =
      '<span>Manual download: <a style="color:var(--accent)" href="' + R2_BASE + '/latest.json">' + R2_BASE + '/latest.json</a></span>';
  }
}

function switchTab(name) {
  document.querySelectorAll('.tab').forEach((t,i) => {
    const names = ['install','verify','assume'];
    t.classList.toggle('active', names[i] === name);
  });
  document.querySelectorAll('.tab-content').forEach(c => {
    c.classList.toggle('active', c.id === 'tab-' + name);
  });
}

loadSnapshot();
</script>
</body>
</html>
